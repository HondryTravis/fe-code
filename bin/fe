#!/usr/bin/env node
const { program } = require('commander');
const figlet = require('figlet');
const Printer = require('@darkobits/lolcatjs');
const shell = require('shelljs');
const chalk = require('chalk');
const inquirer = require('inquirer');
const ora = require('ora');
const download = require('download-git-repo');
const { version } = require('../package.json');
const loadConfig = require('../lib/loadConfig');

const versionStr = figlet.textSync('Fe Code');

program.version(
  Printer.default.fromString(
    `   \n   前端代码生成器${version}\n    www.yidengfe.com \n${versionStr}`,
  ),
);
// .option('-c, --config <path>', '配置路径', './fecoderc.json');

// register all the abilities powered by fe-code
const subCommands = [{
  path: '../scripts/api2code',
  name: 'api2code',
  description: '接口转换及CURD代码生成器',
  enable: true,
}, {
  path: '../scripts/vue2code',
  name: 'vue2code',
  description: 'vue代码生成器',
  enable: false,
}, {
  path: '../scripts/react2code',
  name: 'react2code',
  description: 'react代码生成器',
  enable: false,
}, {
  path: '../scripts/env2code',
  name: 'env2code',
  description: '运行环境代码生成器',
  enable: false,
}];

// setup all the abilities
subCommands.forEach(({ path, enable }) => {
  if (enable && path) {
    require(path)(program);
  }
});

program
  .usage('[对应Commands]')
  .action(({args}, otherParmas) => {
    const whiteList = ['api2ts'];
  });
program.parse(process.argv);
